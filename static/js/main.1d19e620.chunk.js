(this["webpackJsonpbikeio-fe"]=this["webpackJsonpbikeio-fe"]||[]).push([[0],{131:function(e){e.exports=JSON.parse('{"path.home":"Bikee!","path.register.title":"Register your bikes","path.search.title":"Search for bike owner","path.report.title":"Report suspicious bikes","register.title":"Register your bikes","register.first_name":"John","register.first_name.title":"First Name","register.first_name.required":"First Name Required","register.last_name":"Doe","register.last_name.title":"Last Name","register.last_name.required":"Last Name Required","register.phone.title":"Phone Number","register.phone":"0501234567","register.phone.required":"Phone required","register.phone.invalid":"Phone number invalid","register.secondary_phone.title":"Secondary Phone Number","register.secondary_phone.placeholder":"0501234567","register.secondary_phone.invalid":"Phone number invalid","register.city.title":"City","register.city.placeholder":"Tel-Aviv","register.city.required":"Required","register.bike_id.title":"Bike serial number","register.bike_id.placeholder":"A1234C","register.bike_id.required":"Required","register.brand.title":"Brand","register.brand.placeholder":"Trek","register.brand.required":"Required","register.color.title":"Color","register.color.placeholder":"Green","register.color.required":"Required","register.terms.title":"Accept terms","register.terms.required":"Required","dropzone.helper":"Drop files here or click to open your finder","result.firstName":"First Name","result.lastName":"Last Name","result.brand":"Brand","result.color":"Color","result.bike_id":"Serial Number","result.phone":"Phone number","result.secondaryPhone":"Secondary Phone Number"}')},153:function(e,r,t){},154:function(e,r,t){},173:function(e,r,t){},199:function(e,r,t){"use strict";t.r(r);var n=t(0),i=t(14),a=t.n(i),s=(t(153),t(154),t(75)),c=t(15),o=t(11),l=t.n(o),u=t(38),d=t(19),b=t(18),p=t(107),h=t(46),j=t(16),m=t(130),f=t.n(m),O=t(5),g=function(e){var r=e.onFileChanged,t=e.files,i=void 0===t?[]:t,a=Object(n.useState)([]),s=Object(b.a)(a,2),c=s[0],o=s[1],l=Object(h.a)();return Object(O.jsx)(f.a,{multiple:!0,maxSize:"2mb",multipleMaxSize:"10mb",multipleMaxCount:4,accept:["application/pdf","image/jpg","image/jpeg","image/png"],onSuccess:function(e){r([].concat(Object(j.a)(i),Object(j.a)(e)))},onError:o,children:function(e){var r=e.browseFiles,t=e.getDropZoneProps;e.getLabelProps;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",Object(u.a)(Object(u.a)({},t({className:"myDropZone"})),{},{onClick:r,children:Object(O.jsx)("span",{children:l({id:"dropzone.helper"})})})),Object(O.jsxs)("ol",{children:[i.map((function(e){return Object(O.jsx)("li",{children:e.name},e.name)})),c.map((function(e){return Object(O.jsxs)("li",{children:[e.file.name," - ",e.type]},e.file.name)}))]})]})}})},x=(t(173),"https://bikeeio.herokuapp.com/bikeapi");console.log("API: ",x);var v=function(){var e=Object(d.a)(l.a.mark((function e(r){var t,n,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{},e.prev=1,e.next=4,window.grecaptcha.execute(Object({NODE_ENV:"production",PUBLIC_URL:"/bikeIO-fe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://bikeeio.herokuapp.com/bikeapi"}).REACT_APP_RECAPTCHA_SITE_URL,{action:r.replace(x,"")});case 4:return n=e.sent,e.next=7,fetch(r,Object(u.a)(Object(u.a)({},t),{},{headers:Object(u.a)(Object(u.a)({},t.headers||{}),{},{"x-token":n})}));case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(l.a.mark((function e(r){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("file",r.src.file),e.next=5,v("https://bikeeio.herokuapp.com/bikeapi/files",{method:"POST",body:t});case 5:return n=e.sent,e.abrupt("return",n.json());case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map((function(e){return k(e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(l.a.mark((function e(r){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("https://bikeeio.herokuapp.com/bikeapi/bike",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bikeDetails:r})});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(l.a.mark((function e(r){var t,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("https://bikeeio.herokuapp.com/bikeapi/bike"+"/".concat(r));case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,i=n.result.bike,e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(r){return e.apply(this,arguments)}}(),N=t(238),q=t(226),C=t(229),w=function(e){var r=e.control,t=e.errors,n=e.t,i=e.name,a=e.label,s=e.rules;return Object(O.jsx)(q.a,{fullWidth:!0,variant:"outlined",className:"formField",children:Object(O.jsx)(p.a,{name:i,as:Object(O.jsx)(N.a,{id:i,helperText:t[i]?t[i].message:null,label:n({id:a}),error:!!t[i]}),control:r,defaultValue:"",rules:s})})},P=Object(c.f)((function(e){var r=e.history,t=Object(p.b)({defaultValues:{firstName:"omer",lastName:"shacham",phone:"0506652800",secondary_phone:"0506652800",city:"tel aviv",bike_id:"1234",brand:"trek",color:"white",acceptedTerms:!0}}),i=(t.register,t.handleSubmit),a=t.errors,s=(t.reset,t.formState),c=t.setError,o=t.control,j=(s.isDirty,s.isSubmitting),m=Object(n.useState)([]),f=Object(b.a)(m,2),x=f[0],v=f[1],k=Object(n.useState)(null),S=Object(b.a)(k,2),N=S[0],q=S[1],P=Object(h.a)();Object(n.useEffect)((function(e){console.log(a)}),[a]);var R=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,i,a,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N){e.next=6;break}return e.next=4,y(x);case 4:n=e.sent,q(n);case 6:return i=n.map((function(e){return e.file})),console.log("imhere"),e.next=10,_(Object(u.a)({assets:i},t));case 10:a=e.sent,s=a.result,(o=a.error)&&Object.entries(o).forEach((function(e){var r=Object(b.a)(e,2),t=r[0],n=r[1];c(t,{type:"server",message:n})})),s&&r.push("/success");case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return Object(O.jsx)("form",{onSubmit:i(R),children:Object(O.jsxs)("div",{className:"formFields",children:[w({control:o,errors:a,t:P,name:"firstName",label:"register.first_name.title",rules:{required:P({id:"register.first_name.required"})}}),w({control:o,errors:a,t:P,name:"lastName",label:"register.last_name.title",rules:{required:P({id:"register.last_name.required"})}}),w({control:o,errors:a,t:P,name:"phone",label:"register.phone.title",rules:{required:P({id:"register.phone.required"}),pattern:{value:/^\d+$/i,message:P({id:"register.phone.invalid"})}}}),w({control:o,errors:a,t:P,name:"secondary_phone",label:"register.secondary_phone.title",rules:{pattern:{value:/^\d*$/i,message:P({id:"register.secondary_phone.invalid"})}}}),w({control:o,errors:a,t:P,name:"bike_id",label:"register.bike_id.title",rules:{required:P({id:"register.bike_id.required"})}}),w({control:o,errors:a,t:P,name:"city",label:"register.city.title",rules:{required:P({id:"register.city.required"})}}),w({control:o,errors:a,t:P,name:"brand",label:"register.brand.title",rules:{required:P({id:"register.brand.required"})}}),w({control:o,errors:a,t:P,name:"color",label:"register.color.title",rules:{required:P({id:"register.color.required"})}}),Object(O.jsx)("div",{children:Object(O.jsx)(g,{files:x,onFileChanged:v})}),Object(O.jsx)("div",{className:"spacer"}),Object(O.jsx)("div",{children:Object(O.jsx)(C.a,{variant:"contained",fullWidth:!0,color:"primary",disabled:j,type:"submit",children:"Submit"})})]})})})),R=t(65),T=t.n(R),F=t(230),E=t(98),D=t.n(E),A=T()((function(e){return{root:{margin:e.spacing(2)},searchRoot:{height:"30%",display:"flex",flexDirection:"column"},searchInput:{margin:e.spacing(2)},searchButton:{},bikesRoot:{display:"flex",flexDirection:"column"},buttonProgress:{color:D.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},searchContainer:{width:"50%",margin:"auto",position:"relative"}}})),B=function(e){var r=A(),t=Object(h.a)(),i=Object(n.useState)(""),a=Object(b.a)(i,2),s=a[0],c=a[1],o=Object(n.useState)(!1),u=Object(b.a)(o,2),p=u[0],j=u[1],m=Object(n.useState)(null),f=Object(b.a)(m,2),g=f[0],x=f[1],v=Object(n.useState)(null),k=Object(b.a)(v,2),y=k[0],_=k[1],q=function(){var e=Object(d.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),_(null),x(null),e.next=5,S(s);case 5:r=e.sent,setTimeout((function(){r||_("Cant find bike with serial: ".concat(s)),x(r),j(!1)}),2e3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:r.root,children:[Object(O.jsxs)("div",{className:r.searchRoot,children:[Object(O.jsx)(N.a,{className:r.searchInput,label:"Bike Serial Number",error:!!y,helperText:y,onChange:function(e){return c(e.target.value)},value:s}),Object(O.jsxs)("div",{className:r.searchContainer,children:[Object(O.jsx)(C.a,{className:r.searchButton,variant:"contained",fullWidth:!0,color:"primary",disabled:p,onClick:q,children:"Search!"}),p&&Object(O.jsx)(F.a,{size:24,className:r.buttonProgress})]})]}),g&&Object(O.jsx)("div",{className:r.bikesRoot,children:Object.entries(g).map((function(e){var r=Object(b.a)(e,2),n=r[0],i=r[1];return Object(O.jsxs)("div",{children:[t({id:"result.".concat(n)}),": ",i]},n)}))})]})},L=function(e){return Object(O.jsx)("div",{children:"Home"})},I=t(231),J=t(232),W=t(233),z=t(99),H=t.n(z),G=t(89),K=t(241),U=t(228),V=t(234),M=t(235),Z=t(100),$=t.n(Z),Q=t(236),X=t(101),Y=t.n(X),ee=t(102),re=t.n(ee),te=T()((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},list:{width:250}}})),ne={"/register":"path.register.title","/search":"path.search.title"},ie=Object(c.f)((function(e){var r=e.history,t=e.location,i=Object(h.a)(),a=te(),s=Object(n.useState)(!1),c=Object(b.a)(s,2),o=c[0],l=c[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(I.a,{position:"static",children:Object(O.jsxs)(J.a,{children:[Object(O.jsx)(W.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return l(!0)},children:Object(O.jsx)(H.a,{})}),Object(O.jsx)(G.a,{variant:"h6",className:a.title,children:i({id:ne[t.pathname]||"path.home"})})]})}),Object(O.jsx)(K.a,{anchor:"left",open:o,children:Object(O.jsx)("div",{className:a.list,role:"presentation",onClick:function(){return l(!1)},onKeyDown:function(){return l(!1)},children:Object(O.jsxs)(U.a,{children:[Object(O.jsxs)(V.a,{button:!0,onClick:function(){return r.push("/search")},children:[Object(O.jsx)(M.a,{children:Object(O.jsx)($.a,{})}),Object(O.jsx)(Q.a,{primary:i({id:"path.search.title"})})]},"search"),Object(O.jsxs)(V.a,{button:!0,onClick:function(){return r.push("/register")},children:[Object(O.jsx)(M.a,{children:Object(O.jsx)(Y.a,{})}),Object(O.jsx)(Q.a,{primary:i({id:"path.register.title"})})]},"register"),Object(O.jsxs)(V.a,{button:!0,children:[Object(O.jsx)(M.a,{children:Object(O.jsx)(re.a,{})}),Object(O.jsx)(Q.a,{primary:i({id:"path.report.title"})})]},"report")]})})})]})})),ae=function(){return Object(O.jsx)("div",{children:"Good Job"})};var se=function(){return Object(O.jsx)("div",{children:Object(O.jsx)(s.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(ie,{}),Object(O.jsxs)(c.c,{children:[Object(O.jsx)(c.a,{path:"/success",component:ae}),Object(O.jsx)(c.a,{path:"/register",component:P}),Object(O.jsx)(c.a,{path:"/search",component:B}),Object(O.jsx)(c.a,{component:L})]})]})})})},ce=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,243)).then((function(r){var t=r.getCLS,n=r.getFID,i=r.getFCP,a=r.getLCP,s=r.getTTFB;t(e),n(e),i(e),a(e),s(e)}))},oe=t(239),le=t(131),ue=t(237),de={en:le},be=navigator.language.split(/[-_]/)[0];a.a.render(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ue.a,{}),Object(O.jsx)(oe.a,{locale:"en",messages:de[be],defaultLocale:"en",children:Object(O.jsx)(se,{})})]}),document.getElementById("root")),ce()}},[[199,1,2]]]);
//# sourceMappingURL=main.1d19e620.chunk.js.map