(this["webpackJsonpbikeio-fe"]=this["webpackJsonpbikeio-fe"]||[]).push([[0],{131:function(e){e.exports=JSON.parse('{"path.home":"Bikee!","path.register.title":"Register your bikes","path.search.title":"Search for bike owner","path.report.title":"Report suspicious bikes","register.title":"Register your bikes","register.first_name":"John","register.first_name.title":"First Name","register.first_name.required":"First Name Required","register.last_name":"Doe","register.last_name.title":"Last Name","register.last_name.required":"Last Name Required","register.phone.title":"Phone Number","register.phone":"0501234567","register.phone.required":"Phone required","register.phone.invalid":"Phone number invalid","register.secondary_phone.title":"Secondary Phone Number","register.secondary_phone.placeholder":"0501234567","register.secondary_phone.invalid":"Phone number invalid","register.city.title":"City","register.city.placeholder":"Tel-Aviv","register.city.required":"Required","register.bike_id.title":"Bike serial number","register.bike_id.placeholder":"A1234C","register.bike_id.required":"Required","register.brand.title":"Brand","register.brand.placeholder":"Trek","register.brand.required":"Required","register.color.title":"Color","register.color.placeholder":"Green","register.color.required":"Required","register.terms.title":"Accept terms","register.terms.required":"Required","dropzone.helper":"Drop files here or click to open your finder","result.firstName":"First Name","result.lastName":"Last Name","result.brand":"Brand","result.color":"Color","result.bike_id":"Serial Number","result.phone":"Phone number","result.secondaryPhone":"Secondary Phone Number"}')},153:function(e,r,t){},154:function(e,r,t){},173:function(e,r,t){},199:function(e,r,t){"use strict";t.r(r);var n=t(0),i=t(14),a=t.n(i),s=(t(153),t(154),t(75)),c=t(15),o=t(11),l=t.n(o),u=t(38),d=t(19),b=t(18),j=t(107),p=t(46),h=t(16),m=t(130),O=t.n(m),f=t(5),g=function(e){var r=e.onFileChanged,t=e.files,i=void 0===t?[]:t,a=Object(n.useState)([]),s=Object(b.a)(a,2),c=s[0],o=s[1],l=Object(p.a)();return Object(f.jsx)(O.a,{multiple:!0,maxSize:"2mb",multipleMaxSize:"10mb",multipleMaxCount:4,accept:["application/pdf","image/jpg","image/jpeg","image/png"],onSuccess:function(e){r([].concat(Object(h.a)(i),Object(h.a)(e)))},onError:o,children:function(e){var r=e.browseFiles,t=e.getDropZoneProps;e.getLabelProps;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",Object(u.a)(Object(u.a)({},t({className:"myDropZone"})),{},{onClick:r,children:Object(f.jsx)("span",{children:l({id:"dropzone.helper"})})})),Object(f.jsxs)("ol",{children:[i.map((function(e){return Object(f.jsx)("li",{children:e.name},e.name)})),c.map((function(e){return Object(f.jsxs)("li",{children:[e.file.name," - ",e.type]},e.file.name)}))]})]})}})},x=(t(173),Object({NODE_ENV:"production",PUBLIC_URL:"/bikeIO-fe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:3000/bikeapi"),v=x+"/files",_=x+"/bike",y=x+"/bike",k=function(){var e=Object(d.a)(l.a.mark((function e(r){var t,n,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{},e.prev=1,e.next=4,window.grecaptcha.execute(Object({NODE_ENV:"production",PUBLIC_URL:"/bikeIO-fe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_RECAPTCHA_SITE_URL,{action:r.replace(x,"")});case 4:return n=e.sent,e.next=7,fetch(r,Object(u.a)(Object(u.a)({},t),{},{headers:Object(u.a)(Object(u.a)({},t.headers||{}),{},{"x-token":n})}));case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(r){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(l.a.mark((function e(r){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("file",r.src.file),e.next=5,k(v,{method:"POST",body:t});case 5:return n=e.sent,e.abrupt("return",n.json());case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map((function(e){return S(e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(l.a.mark((function e(r){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bikeDetails:r})});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(l.a.mark((function e(r){var t,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(y+"/".concat(r));case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,i=n.result.bike,e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(r){return e.apply(this,arguments)}}(),T=t(238),P=t(226),w=t(229),R=function(e){var r=e.control,t=e.errors,n=e.t,i=e.name,a=e.label,s=e.rules;return Object(f.jsx)(P.a,{fullWidth:!0,variant:"outlined",className:"formField",children:Object(f.jsx)(j.a,{name:i,as:Object(f.jsx)(T.a,{id:i,helperText:t[i]?t[i].message:null,label:n({id:a}),error:!!t[i]}),control:r,defaultValue:"",rules:s})})},E=Object(c.f)((function(e){var r=e.history,t=Object(j.b)({defaultValues:{firstName:"omer",lastName:"shacham",phone:"0506652800",secondary_phone:"0506652800",city:"tel aviv",bike_id:"1234",brand:"trek",color:"white",acceptedTerms:!0}}),i=(t.register,t.handleSubmit),a=t.errors,s=(t.reset,t.formState),c=t.setError,o=t.control,h=(s.isDirty,s.isSubmitting),m=Object(n.useState)([]),O=Object(b.a)(m,2),x=O[0],v=O[1],_=Object(n.useState)(null),y=Object(b.a)(_,2),k=y[0],S=y[1],q=Object(p.a)();Object(n.useEffect)((function(e){console.log(a)}),[a]);var T=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,i,a,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=k){e.next=6;break}return e.next=4,N(x);case 4:n=e.sent,S(n);case 6:return i=n.map((function(e){return e.file})),console.log("imhere"),e.next=10,C(Object(u.a)({assets:i},t));case 10:a=e.sent,s=a.result,(o=a.error)&&Object.entries(o).forEach((function(e){var r=Object(b.a)(e,2),t=r[0],n=r[1];c(t,{type:"server",message:n})})),s&&r.push("/success");case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return Object(f.jsx)("form",{onSubmit:i(T),children:Object(f.jsxs)("div",{className:"formFields",children:[R({control:o,errors:a,t:q,name:"firstName",label:"register.first_name.title",rules:{required:q({id:"register.first_name.required"})}}),R({control:o,errors:a,t:q,name:"lastName",label:"register.last_name.title",rules:{required:q({id:"register.last_name.required"})}}),R({control:o,errors:a,t:q,name:"phone",label:"register.phone.title",rules:{required:q({id:"register.phone.required"}),pattern:{value:/^\d+$/i,message:q({id:"register.phone.invalid"})}}}),R({control:o,errors:a,t:q,name:"secondary_phone",label:"register.secondary_phone.title",rules:{pattern:{value:/^\d*$/i,message:q({id:"register.secondary_phone.invalid"})}}}),R({control:o,errors:a,t:q,name:"bike_id",label:"register.bike_id.title",rules:{required:q({id:"register.bike_id.required"})}}),R({control:o,errors:a,t:q,name:"city",label:"register.city.title",rules:{required:q({id:"register.city.required"})}}),R({control:o,errors:a,t:q,name:"brand",label:"register.brand.title",rules:{required:q({id:"register.brand.required"})}}),R({control:o,errors:a,t:q,name:"color",label:"register.color.title",rules:{required:q({id:"register.color.required"})}}),Object(f.jsx)("div",{children:Object(f.jsx)(g,{files:x,onFileChanged:v})}),Object(f.jsx)("div",{className:"spacer"}),Object(f.jsx)("div",{children:Object(f.jsx)(w.a,{variant:"contained",fullWidth:!0,color:"primary",disabled:h,type:"submit",children:"Submit"})})]})})})),F=t(65),D=t.n(F),A=t(230),L=t(98),B=t.n(L),I=D()((function(e){return{root:{margin:e.spacing(2)},searchRoot:{height:"30%",display:"flex",flexDirection:"column"},searchInput:{margin:e.spacing(2)},searchButton:{},bikesRoot:{display:"flex",flexDirection:"column"},buttonProgress:{color:B.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},searchContainer:{width:"50%",margin:"auto",position:"relative"}}})),W=function(e){var r=I(),t=Object(p.a)(),i=Object(n.useState)(""),a=Object(b.a)(i,2),s=a[0],c=a[1],o=Object(n.useState)(!1),u=Object(b.a)(o,2),j=u[0],h=u[1],m=Object(n.useState)(null),O=Object(b.a)(m,2),g=O[0],x=O[1],v=Object(n.useState)(null),_=Object(b.a)(v,2),y=_[0],k=_[1],S=function(){var e=Object(d.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),k(null),x(null),e.next=5,q(s);case 5:r=e.sent,setTimeout((function(){r||k("Cant find bike with serial: ".concat(s)),x(r),h(!1)}),2e3);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:r.root,children:[Object(f.jsxs)("div",{className:r.searchRoot,children:[Object(f.jsx)(T.a,{className:r.searchInput,label:"Bike Serial Number",error:!!y,helperText:y,onChange:function(e){return c(e.target.value)},value:s}),Object(f.jsxs)("div",{className:r.searchContainer,children:[Object(f.jsx)(w.a,{className:r.searchButton,variant:"contained",fullWidth:!0,color:"primary",disabled:j,onClick:S,children:"Search!"}),j&&Object(f.jsx)(A.a,{size:24,className:r.buttonProgress})]})]}),g&&Object(f.jsx)("div",{className:r.bikesRoot,children:Object.entries(g).map((function(e){var r=Object(b.a)(e,2),n=r[0],i=r[1];return Object(f.jsxs)("div",{children:[t({id:"result.".concat(n)}),": ",i]},n)}))})]})},H=function(e){return Object(f.jsx)("div",{children:"Home"})},K=t(231),J=t(232),U=t(233),z=t(99),G=t.n(z),V=t(89),M=t(241),Z=t(228),$=t(234),Q=t(235),X=t(100),Y=t.n(X),ee=t(236),re=t(101),te=t.n(re),ne=t(102),ie=t.n(ne),ae=D()((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},list:{width:250}}})),se={"/register":"path.register.title","/search":"path.search.title"},ce=Object(c.f)((function(e){var r=e.history,t=e.location,i=Object(p.a)(),a=ae(),s=Object(n.useState)(!1),c=Object(b.a)(s,2),o=c[0],l=c[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(K.a,{position:"static",children:Object(f.jsxs)(J.a,{children:[Object(f.jsx)(U.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return l(!0)},children:Object(f.jsx)(G.a,{})}),Object(f.jsx)(V.a,{variant:"h6",className:a.title,children:i({id:se[t.pathname]||"path.home"})})]})}),Object(f.jsx)(M.a,{anchor:"left",open:o,children:Object(f.jsx)("div",{className:a.list,role:"presentation",onClick:function(){return l(!1)},onKeyDown:function(){return l(!1)},children:Object(f.jsxs)(Z.a,{children:[Object(f.jsxs)($.a,{button:!0,onClick:function(){return r.push("/search")},children:[Object(f.jsx)(Q.a,{children:Object(f.jsx)(Y.a,{})}),Object(f.jsx)(ee.a,{primary:i({id:"path.search.title"})})]},"search"),Object(f.jsxs)($.a,{button:!0,onClick:function(){return r.push("/register")},children:[Object(f.jsx)(Q.a,{children:Object(f.jsx)(te.a,{})}),Object(f.jsx)(ee.a,{primary:i({id:"path.register.title"})})]},"register"),Object(f.jsxs)($.a,{button:!0,children:[Object(f.jsx)(Q.a,{children:Object(f.jsx)(ie.a,{})}),Object(f.jsx)(ee.a,{primary:i({id:"path.report.title"})})]},"report")]})})})]})})),oe=function(){return Object(f.jsx)("div",{children:"Good Job"})};var le=function(){return Object(f.jsx)("div",{children:Object(f.jsx)(s.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(ce,{}),Object(f.jsxs)(c.c,{children:[Object(f.jsx)(c.a,{path:"/success",component:oe}),Object(f.jsx)(c.a,{path:"/register",component:E}),Object(f.jsx)(c.a,{path:"/search",component:W}),Object(f.jsx)(c.a,{component:H})]})]})})})},ue=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,243)).then((function(r){var t=r.getCLS,n=r.getFID,i=r.getFCP,a=r.getLCP,s=r.getTTFB;t(e),n(e),i(e),a(e),s(e)}))},de=t(239),be=t(131),je=t(237),pe={en:be},he=navigator.language.split(/[-_]/)[0];a.a.render(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(je.a,{}),Object(f.jsx)(de.a,{locale:"en",messages:pe[he],defaultLocale:"en",children:Object(f.jsx)(le,{})})]}),document.getElementById("root")),ue()}},[[199,1,2]]]);
//# sourceMappingURL=main.ed879425.chunk.js.map